<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Particle Life â€” Complete Code | Build It</title>
    <link rel="stylesheet" href="/build-it/assets/css/guide.css">
    <style>
        .code-container {
            background: #1e1e1e;
            border-radius: 8px;
            margin: 2rem 0;
            overflow: hidden;
        }
        .code-header {
            background: #2d2d2d;
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #3d3d3d;
        }
        .code-header span {
            color: #888;
            font-size: 0.875rem;
        }
        .copy-btn {
            background: #4a9eff;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.875rem;
        }
        .copy-btn:hover {
            background: #3a8eef;
        }
        .copy-btn.copied {
            background: #4caf50;
        }
        .code-content {
            padding: 1rem;
            overflow-x: auto;
            max-height: 600px;
            overflow-y: auto;
        }
        .code-content pre {
            margin: 0;
            color: #d4d4d4;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.875rem;
            line-height: 1.5;
        }
        .instructions {
            background: #f0f7ff;
            border-left: 4px solid #4a9eff;
            padding: 1rem 1.5rem;
            margin: 2rem 0;
            border-radius: 0 8px 8px 0;
        }
        .instructions h3 {
            margin-top: 0;
            color: #2d5a8b;
        }
        .instructions ol {
            margin-bottom: 0;
        }
        .instructions code {
            background: #e0ecf7;
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <header class="site-header">
        <div class="header-content">
            <div class="brand"><a href="/build-it/"><span>Build It</span></a></div>
            <nav class="breadcrumb">
                <a href="/build-it/">Home</a> / 
                <a href="/build-it/web-performance/">Web Performance</a> / 
                <a href="/build-it/web-performance/particle-life/">Particle Life</a> / 
                Complete Code
            </nav>
        </div>
    </header>

    <div class="guide-header">
        <h1>Particle Life â€” Complete Code</h1>
        <p class="subtitle">Full working simulation with all features</p>
        <div class="guide-meta">
            <span>ðŸ“„ Single File</span>
            <span>ðŸŽ¯ Copy & Run</span>
            <span>ðŸ’¾ Includes Save/Load</span>
        </div>
    </div>

    <main class="guide-content">
        <article class="page-section">
            <div class="page-body">
                <h2>About This Code</h2>
                <p>This is the complete Particle Life simulation with all three stages implemented:</p>
                <ul>
                    <li><strong>Foundation</strong> â€” Particle physics, species interactions, spatial hashing</li>
                    <li><strong>Configuration</strong> â€” Settings panel, presets, trails effect, adjustable parameters</li>
                    <li><strong>Persistence</strong> â€” Save/load configurations to localStorage</li>
                </ul>
                
                <div class="instructions">
                    <h3>How to Run</h3>
                    <p>Follow the <a href="./setup.html">Setup Guide</a> for step-by-step instructions to run this on your Mac.</p>
                </div>

                <div class="code-container">
                    <div class="code-header">
                        <span>App.jsx â€” Particle Life Complete</span>
                        <button class="copy-btn" onclick="copyCode()">Copy Code</button>
                    </div>
                    <div class="code-content">
                        <pre id="codeBlock">import React, { useRef, useEffect, useState, useCallback } from 'react';

// ============================================
// CONSTANTS
// ============================================

const WIDTH = 1400;
const HEIGHT = 1000;
const NUM_PARTICLES = 1000;
const NUM_SPECIES = 6;
const MAX_DISTANCE = 100;
const MIN_DISTANCE = 20;
const CELL_SIZE = MAX_DISTANCE;

const COLORS = [
  '#FF6B6B', // Red
  '#4ECDC4', // Teal
  '#45B7D1', // Blue
  '#96CEB4', // Green
  '#FFEAA7', // Yellow
  '#DDA0DD', // Plum
];

const DEFAULT_SETTINGS = {
  particleCount: 10000,
  friction: 0.5,
  forceFactor: 1,
  maxDistance: 100,
  minDistance: 20,
  trailsEnabled: false,
  trailOpacity: 0.1,
  wrapEdges: true,
};

// ============================================
// PRESET RULES
// ============================================

const PRESET_RULES = {
  random: () => {
    const rules = [];
    for (let i = 0; i &lt; NUM_SPECIES; i++) {
      rules[i] = [];
      for (let j = 0; j &lt; NUM_SPECIES; j++) {
        rules[i][j] = Math.random() * 2 - 1;
      }
    }
    return rules;
  },

  symmetric: () => {
    const rules = [];
    for (let i = 0; i &lt; NUM_SPECIES; i++) {
      rules[i] = [];
      for (let j = 0; j &lt; NUM_SPECIES; j++) {
        if (j &lt;= i) {
          rules[i][j] = Math.random() * 2 - 1;
        } else {
          rules[i][j] = rules[j]?.[i] ?? Math.random() * 2 - 1;
        }
      }
    }
    return rules;
  },

  chains: () => {
    const rules = [];
    for (let i = 0; i &lt; NUM_SPECIES; i++) {
      rules[i] = [];
      for (let j = 0; j &lt; NUM_SPECIES; j++) {
        if (j === (i + 1) % NUM_SPECIES) {
          rules[i][j] = 0.8;
        } else if (j === i) {
          rules[i][j] = -0.2;
        } else {
          rules[i][j] = 0;
        }
      }
    }
    return rules;
  },

  clusters: () => {
    const rules = [];
    for (let i = 0; i &lt; NUM_SPECIES; i++) {
      rules[i] = [];
      for (let j = 0; j &lt; NUM_SPECIES; j++) {
        if (i === j) {
          rules[i][j] = 0.5;
        } else {
          rules[i][j] = -0.3;
        }
      }
    }
    return rules;
  },

  snakes: () => {
    const rules = [];
    for (let i = 0; i &lt; NUM_SPECIES; i++) {
      rules[i] = [];
      for (let j = 0; j &lt; NUM_SPECIES; j++) {
        if (j === (i + 1) % NUM_SPECIES) {
          rules[i][j] = 1;
        } else if (j === i) {
          rules[i][j] = 0.1;
        } else if (j === (i + NUM_SPECIES - 1) % NUM_SPECIES) {
          rules[i][j] = -0.5;
        } else {
          rules[i][j] = 0;
        }
      }
    }
    return rules;
  },

  orbits: () => {
    const rules = [];
    for (let i = 0; i &lt; NUM_SPECIES; i++) {
      rules[i] = [];
      for (let j = 0; j &lt; NUM_SPECIES; j++) {
        const diff = (j - i + NUM_SPECIES) % NUM_SPECIES;
        if (diff === 1) {
          rules[i][j] = 0.6;
        } else if (diff === NUM_SPECIES - 1) {
          rules[i][j] = -0.6;
        } else if (i === j) {
          rules[i][j] = -0.1;
        } else {
          rules[i][j] = 0.1;
        }
      }
    }
    return rules;
  },
};

// ============================================
// SPATIAL HASH GRID
// ============================================

class SpatialHashGrid {
  constructor(width, height, cellSize) {
    this.cellSize = cellSize;
    this.cols = Math.ceil(width / cellSize);
    this.rows = Math.ceil(height / cellSize);
    this.cells = new Map();
  }

  clear() {
    this.cells.clear();
  }

  getKey(col, row) {
    return `${col},${row}`;
  }

  insert(particle) {
    const col = Math.floor(particle.x / this.cellSize);
    const row = Math.floor(particle.y / this.cellSize);
    const key = this.getKey(col, row);

    if (!this.cells.has(key)) {
      this.cells.set(key, []);
    }
    this.cells.get(key).push(particle);
  }

  getNearby(particle) {
    const col = Math.floor(particle.x / this.cellSize);
    const row = Math.floor(particle.y / this.cellSize);
    const nearby = [];

    for (let dc = -1; dc &lt;= 1; dc++) {
      for (let dr = -1; dr &lt;= 1; dr++) {
        const key = this.getKey(col + dc, row + dr);
        const cell = this.cells.get(key);
        if (cell) {
          nearby.push(...cell);
        }
      }
    }

    return nearby;
  }
}

// ============================================
// PARTICLE FACTORY
// ============================================

function createParticle(id) {
  return {
    id,
    x: Math.random() * WIDTH,
    y: Math.random() * HEIGHT,
    vx: 0,
    vy: 0,
    species: Math.floor(Math.random() * NUM_SPECIES),
  };
}

function createParticles(count) {
  const particles = [];
  for (let i = 0; i &lt; count; i++) {
    particles.push(createParticle(i));
  }
  return particles;
}

// ============================================
// STORAGE FUNCTIONS
// ============================================

const STORAGE_KEY = 'particle-life-config';

function saveConfiguration(name, settings, rules) {
  const saved = loadAllConfigurations();
  saved[name] = {
    settings,
    rules,
    timestamp: Date.now(),
  };
  localStorage.setItem(STORAGE_KEY, JSON.stringify(saved));
}

function loadAllConfigurations() {
  try {
    const data = localStorage.getItem(STORAGE_KEY);
    return data ? JSON.parse(data) : {};
  } catch {
    return {};
  }
}

function deleteConfiguration(name) {
  const saved = loadAllConfigurations();
  delete saved[name];
  localStorage.setItem(STORAGE_KEY, JSON.stringify(saved));
}

// ============================================
// MAIN COMPONENT
// ============================================

export default function ParticleLife() {
  const canvasRef = useRef(null);
  const trailCanvasRef = useRef(null);
  const particlesRef = useRef([]);
  const rulesRef = useRef([]);
  const gridRef = useRef(null);
  const animationRef = useRef(null);

  const [settings, setSettings] = useState(DEFAULT_SETTINGS);
  const [currentPreset, setCurrentPreset] = useState('random');
  const [savedConfigs, setSavedConfigs] = useState({});
  const [saveName, setSaveName] = useState('');

  // Initialize simulation
  const initSimulation = useCallback(() => {
    particlesRef.current = createParticles(settings.particleCount);
    rulesRef.current = PRESET_RULES[currentPreset]();
    gridRef.current = new SpatialHashGrid(WIDTH, HEIGHT, CELL_SIZE);

    // Clear trail canvas
    const trailCanvas = trailCanvasRef.current;
    if (trailCanvas) {
      const ctx = trailCanvas.getContext('2d');
      ctx.fillStyle = '#000';
      ctx.fillRect(0, 0, WIDTH, HEIGHT);
    }
  }, [settings.particleCount, currentPreset]);

  // Update physics
  const updatePhysics = useCallback(() => {
    const particles = particlesRef.current;
    const rules = rulesRef.current;
    const grid = gridRef.current;
    const { friction, forceFactor, maxDistance, minDistance, wrapEdges } = settings;

    grid.clear();
    for (const p of particles) {
      grid.insert(p);
    }

    for (const p of particles) {
      let fx = 0;
      let fy = 0;
      const nearby = grid.getNearby(p);

      for (const other of nearby) {
        if (p.id === other.id) continue;

        let dx = other.x - p.x;
        let dy = other.y - p.y;

        if (wrapEdges) {
          if (dx &gt; WIDTH / 2) dx -= WIDTH;
          if (dx &lt; -WIDTH / 2) dx += WIDTH;
          if (dy &gt; HEIGHT / 2) dy -= HEIGHT;
          if (dy &lt; -HEIGHT / 2) dy += HEIGHT;
        }

        const dist = Math.sqrt(dx * dx + dy * dy);

        if (dist &gt; 0 &amp;&amp; dist &lt; maxDistance) {
          const rule = rules[p.species][other.species];
          let force = 0;

          if (dist &lt; minDistance) {
            force = (dist / minDistance - 1) * forceFactor;
          } else {
            force = rule * (1 - (dist - minDistance) / (maxDistance - minDistance)) * forceFactor;
          }

          fx += (dx / dist) * force;
          fy += (dy / dist) * force;
        }
      }

      p.vx = (p.vx + fx) * (1 - friction * 0.1);
      p.vy = (p.vy + fy) * (1 - friction * 0.1);

      p.x += p.vx;
      p.y += p.vy;

      if (wrapEdges) {
        if (p.x &lt; 0) p.x += WIDTH;
        if (p.x &gt;= WIDTH) p.x -= WIDTH;
        if (p.y &lt; 0) p.y += HEIGHT;
        if (p.y &gt;= HEIGHT) p.y -= HEIGHT;
      } else {
        if (p.x &lt; 0) { p.x = 0; p.vx *= -0.5; }
        if (p.x &gt;= WIDTH) { p.x = WIDTH - 1; p.vx *= -0.5; }
        if (p.y &lt; 0) { p.y = 0; p.vy *= -0.5; }
        if (p.y &gt;= HEIGHT) { p.y = HEIGHT - 1; p.vy *= -0.5; }
      }
    }
  }, [settings]);

  // Render
  const render = useCallback(() => {
    const canvas = canvasRef.current;
    const trailCanvas = trailCanvasRef.current;
    const ctx = canvas.getContext('2d');
    const trailCtx = trailCanvas.getContext('2d');
    const particles = particlesRef.current;
    const rules = rulesRef.current;
    const { trailsEnabled, trailOpacity } = settings;

    if (trailsEnabled) {
      trailCtx.fillStyle = `rgba(0, 0, 0, ${trailOpacity})`;
      trailCtx.fillRect(0, 0, WIDTH, HEIGHT);

      for (const p of particles) {
        trailCtx.fillStyle = COLORS[p.species];
        trailCtx.beginPath();
        trailCtx.arc(p.x, p.y, 1, 0, Math.PI * 2);
        trailCtx.fill();
      }

      ctx.drawImage(trailCanvas, 0, 0);
    } else {
      ctx.fillStyle = '#000';
      ctx.fillRect(0, 0, WIDTH, HEIGHT);

      for (const p of particles) {
        ctx.fillStyle = COLORS[p.species];
        ctx.beginPath();
        ctx.arc(p.x, p.y, 1, 0, Math.PI * 2);
        ctx.fill();
      }
    }

    // Draw rules matrix
    const matrixSize = 60;
    const cellSize = matrixSize / NUM_SPECIES;
    const matrixX = WIDTH - matrixSize - 10;
    const matrixY = 10;

    ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
    ctx.fillRect(matrixX - 5, matrixY - 5, matrixSize + 10, matrixSize + 10);

    for (let i = 0; i &lt; NUM_SPECIES; i++) {
      for (let j = 0; j &lt; NUM_SPECIES; j++) {
        const rule = rules[i][j];
        const hue = rule &gt; 0 ? 120 : 0;
        const lightness = 30 + Math.abs(rule) * 40;
        ctx.fillStyle = `hsl(${hue}, 70%, ${lightness}%)`;
        ctx.fillRect(
          matrixX + j * cellSize,
          matrixY + i * cellSize,
          cellSize - 1,
          cellSize - 1
        );
      }
    }

    // HUD
    ctx.fillStyle = '#fff';
    ctx.font = '12px monospace';
    ctx.fillText(`Particles: ${particles.length}`, 10, 20);
    ctx.fillText(`Species: ${NUM_SPECIES}`, 10, 35);
    ctx.fillText(`Preset: ${currentPreset}`, 10, 50);
  }, [settings, currentPreset]);

  // Game loop
  const gameLoop = useCallback(() => {
    updatePhysics();
    render();
    animationRef.current = requestAnimationFrame(gameLoop);
  }, [updatePhysics, render]);

  // Initialize on mount
  useEffect(() => {
    initSimulation();
    setSavedConfigs(loadAllConfigurations());
  }, []);

  // Start game loop
  useEffect(() => {
    animationRef.current = requestAnimationFrame(gameLoop);
    return () => {
      if (animationRef.current) {
        cancelAnimationFrame(animationRef.current);
      }
    };
  }, [gameLoop]);

  // Handlers
  const handleSettingChange = (key, value) => {
    setSettings(prev => ({ ...prev, [key]: value }));
  };

  const handlePresetChange = (preset) => {
    setCurrentPreset(preset);
    rulesRef.current = PRESET_RULES[preset]();
  };

  const handleReset = () => {
    initSimulation();
  };

  const handleApply = () => {
    initSimulation();
  };

  const handleResetDefaults = () => {
    setSettings(DEFAULT_SETTINGS);
    setCurrentPreset('random');
    initSimulation();
  };

  const handleSave = () => {
    if (!saveName.trim()) return;
    saveConfiguration(saveName, settings, rulesRef.current);
    setSavedConfigs(loadAllConfigurations());
    setSaveName('');
  };

  const handleLoad = (name) => {
    const config = savedConfigs[name];
    if (config) {
      setSettings(config.settings);
      rulesRef.current = config.rules;
      particlesRef.current = createParticles(config.settings.particleCount);
    }
  };

  const handleDelete = (name) => {
    deleteConfiguration(name);
    setSavedConfigs(loadAllConfigurations());
  };

  return (
    &lt;div style={{ 
      display: 'flex', 
      gap: '20px', 
      padding: '20px', 
      background: '#1a1a2e',
      minHeight: '100vh',
      fontFamily: 'system-ui, sans-serif'
    }}&gt;
      {/* Canvas Container */}
      &lt;div style={{ position: 'relative' }}&gt;
        &lt;canvas
          ref={trailCanvasRef}
          width={WIDTH}
          height={HEIGHT}
          style={{ display: 'none' }}
        /&gt;
        &lt;canvas
          ref={canvasRef}
          width={WIDTH}
          height={HEIGHT}
          style={{
            border: '2px solid #333',
            borderRadius: '8px',
          }}
        /&gt;
      &lt;/div&gt;

      {/* Controls Panel */}
      &lt;div style={{
        background: '#16213e',
        padding: '20px',
        borderRadius: '8px',
        color: '#fff',
        width: '280px',
        maxHeight: '600px',
        overflowY: 'auto',
      }}&gt;
        &lt;h2 style={{ margin: '0 0 15px 0', color: '#4ECDC4' }}&gt;Particle Life&lt;/h2&gt;

        {/* Presets */}
        &lt;div style={{ marginBottom: '20px' }}&gt;
          &lt;h3 style={{ margin: '0 0 10px 0', fontSize: '14px', color: '#888' }}&gt;Presets&lt;/h3&gt;
          &lt;div style={{ display: 'flex', flexWrap: 'wrap', gap: '5px' }}&gt;
            {Object.keys(PRESET_RULES).map(preset =&gt; (
              &lt;button
                key={preset}
                onClick={() =&gt; handlePresetChange(preset)}
                style={{
                  padding: '5px 10px',
                  background: currentPreset === preset ? '#4ECDC4' : '#2a3a5e',
                  color: currentPreset === preset ? '#000' : '#fff',
                  border: 'none',
                  borderRadius: '4px',
                  cursor: 'pointer',
                  fontSize: '12px',
                }}
              &gt;
                {preset}
              &lt;/button&gt;
            ))}
          &lt;/div&gt;
        &lt;/div&gt;

        {/* Settings */}
        &lt;div style={{ marginBottom: '20px' }}&gt;
          &lt;h3 style={{ margin: '0 0 10px 0', fontSize: '14px', color: '#888' }}&gt;Settings&lt;/h3&gt;
          
          &lt;label style={{ display: 'block', marginBottom: '10px' }}&gt;
            &lt;span style={{ fontSize: '12px' }}&gt;Particles: {settings.particleCount}&lt;/span&gt;
            &lt;input
              type="range"
              min="200"
              max="10000"
              step="200"
              value={settings.particleCount}
              onChange={(e) =&gt; handleSettingChange('particleCount', parseInt(e.target.value))}
              style={{ width: '100%' }}
            /&gt;
          &lt;/label&gt;

          &lt;label style={{ display: 'block', marginBottom: '10px' }}&gt;
            &lt;span style={{ fontSize: '12px' }}&gt;Friction: {settings.friction.toFixed(2)}&lt;/span&gt;
            &lt;input
              type="range"
              min="0"
              max="1"
              step="0.05"
              value={settings.friction}
              onChange={(e) =&gt; handleSettingChange('friction', parseFloat(e.target.value))}
              style={{ width: '100%' }}
            /&gt;
          &lt;/label&gt;

          &lt;label style={{ display: 'block', marginBottom: '10px' }}&gt;
            &lt;span style={{ fontSize: '12px' }}&gt;Force: {settings.forceFactor.toFixed(2)}&lt;/span&gt;
            &lt;input
              type="range"
              min="0.01"
              max="0.02"
              step="0.001"
              value={settings.forceFactor}
              onChange={(e) =&gt; handleSettingChange('forceFactor', parseFloat(e.target.value))}
              style={{ width: '100%' }}
            /&gt;
          &lt;/label&gt;

          &lt;label style={{ display: 'block', marginBottom: '10px' }}&gt;
            &lt;input
              type="checkbox"
              checked={settings.trailsEnabled}
              onChange={(e) =&gt; handleSettingChange('trailsEnabled', e.target.checked)}
            /&gt;
            &lt;span style={{ fontSize: '12px', marginLeft: '5px' }}&gt;Enable Trails&lt;/span&gt;
          &lt;/label&gt;

          &lt;label style={{ display: 'block', marginBottom: '10px' }}&gt;
            &lt;input
              type="checkbox"
              checked={settings.wrapEdges}
              onChange={(e) =&gt; handleSettingChange('wrapEdges', e.target.checked)}
            /&gt;
            &lt;span style={{ fontSize: '12px', marginLeft: '5px' }}&gt;Wrap Edges&lt;/span&gt;
          &lt;/label&gt;
        &lt;/div&gt;

        {/* Action Buttons */}
        &lt;div style={{ display: 'flex', gap: '10px', marginBottom: '20px' }}&gt;
          &lt;button
            onClick={handleApply}
            style={{
              flex: 1,
              padding: '8px',
              background: '#4ECDC4',
              color: '#000',
              border: 'none',
              borderRadius: '4px',
              cursor: 'pointer',
              fontWeight: 'bold',
            }}
          &gt;
            Apply
          &lt;/button&gt;
          &lt;button
            onClick={handleReset}
            style={{
              flex: 1,
              padding: '8px',
              background: '#FF6B6B',
              color: '#fff',
              border: 'none',
              borderRadius: '4px',
              cursor: 'pointer',
            }}
          &gt;
            Reset
          &lt;/button&gt;
        &lt;/div&gt;

        {/* Save/Load */}
        &lt;div style={{ borderTop: '1px solid #333', paddingTop: '15px' }}&gt;
          &lt;h3 style={{ margin: '0 0 10px 0', fontSize: '14px', color: '#888' }}&gt;Save / Load&lt;/h3&gt;
          
          &lt;div style={{ display: 'flex', gap: '5px', marginBottom: '10px' }}&gt;
            &lt;input
              type="text"
              placeholder="Config name..."
              value={saveName}
              onChange={(e) =&gt; setSaveName(e.target.value)}
              style={{
                flex: 1,
                padding: '5px',
                background: '#2a3a5e',
                border: '1px solid #444',
                borderRadius: '4px',
                color: '#fff',
              }}
            /&gt;
            &lt;button
              onClick={handleSave}
              style={{
                padding: '5px 15px',
                background: '#45B7D1',
                color: '#fff',
                border: 'none',
                borderRadius: '4px',
                cursor: 'pointer',
              }}
            &gt;
              Save
            &lt;/button&gt;
          &lt;/div&gt;

          {Object.keys(savedConfigs).length &gt; 0 &amp;&amp; (
            &lt;div style={{ fontSize: '12px' }}&gt;
              {Object.keys(savedConfigs).map(name =&gt; (
                &lt;div
                  key={name}
                  style={{
                    display: 'flex',
                    justifyContent: 'space-between',
                    alignItems: 'center',
                    padding: '5px',
                    background: '#2a3a5e',
                    borderRadius: '4px',
                    marginBottom: '5px',
                  }}
                &gt;
                  &lt;span&gt;{name}&lt;/span&gt;
                  &lt;div&gt;
                    &lt;button
                      onClick={() =&gt; handleLoad(name)}
                      style={{
                        padding: '2px 8px',
                        background: '#4ECDC4',
                        color: '#000',
                        border: 'none',
                        borderRadius: '3px',
                        cursor: 'pointer',
                        marginRight: '5px',
                      }}
                    &gt;
                      Load
                    &lt;/button&gt;
                    &lt;button
                      onClick={() =&gt; handleDelete(name)}
                      style={{
                        padding: '2px 8px',
                        background: '#FF6B6B',
                        color: '#fff',
                        border: 'none',
                        borderRadius: '3px',
                        cursor: 'pointer',
                      }}
                    &gt;
                      Ã—
                    &lt;/button&gt;
                  &lt;/div&gt;
                &lt;/div&gt;
              ))}
            &lt;/div&gt;
          )}
        &lt;/div&gt;

        &lt;button
          onClick={handleResetDefaults}
          style={{
            width: '100%',
            padding: '8px',
            marginTop: '15px',
            background: '#333',
            color: '#888',
            border: 'none',
            borderRadius: '4px',
            cursor: 'pointer',
            fontSize: '12px',
          }}
        &gt;
          Reset to Defaults
        &lt;/button&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
}</pre>
                    </div>
                </div>

                <h2>Features</h2>
                <ul>
                    <li><strong>1500 particles</strong> across 6 species with unique interaction rules</li>
                    <li><strong>Spatial hashing</strong> for O(n) performance instead of O(nÂ²)</li>
                    <li><strong>6 built-in presets</strong>: Random, Symmetric, Chains, Clusters, Snakes, Orbits</li>
                    <li><strong>Adjustable settings</strong>: particle count, friction, force, trails, edge wrapping</li>
                    <li><strong>Save/Load configurations</strong> to localStorage</li>
                    <li><strong>Live rules matrix</strong> visualization</li>
                    <li><strong>60fps performance</strong> on modern hardware</li>
                </ul>

                <h2>Want to Learn How It Works?</h2>
                <p>Follow the Build It tutorial to understand every line of code:</p>
                <ul>
                    <li><a href="./foundation.html">Foundation Guide</a> â€” Build the core simulation from scratch (80 pages)</li>
                    <li><a href="./configuration.html">Configuration Guide</a> â€” Add settings and presets (coming soon)</li>
                    <li><a href="./persistence.html">Persistence Guide</a> â€” Add save/load functionality (coming soon)</li>
                </ul>
            </div>
        </article>
    </main>

    <footer class="site-footer">
        <p><strong>Build It</strong> â€” A MoreSalamander StudioLabs Production</p>
        <p>Learn by building. One page at a time.</p>
    </footer>

    <script>
        function copyCode() {
            const codeBlock = document.getElementById('codeBlock');
            const code = codeBlock.textContent
                .replace(/&lt;/g, '<')
                .replace(/&gt;/g, '>')
                .replace(/&amp;/g, '&');
            
            navigator.clipboard.writeText(code).then(() => {
                const btn = document.querySelector('.copy-btn');
                btn.textContent = 'Copied!';
                btn.classList.add('copied');
                setTimeout(() => {
                    btn.textContent = 'Copy Code';
                    btn.classList.remove('copied');
                }, 2000);
            });
        }
    </script>
    <script src="/build-it/assets/js/guide.js"></script>
</body>
</html>
